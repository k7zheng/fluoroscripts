<!DOCTYPE html>
<html lang="en">
<head>
<title>Fluorolive test</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- ocpu library -->
<script src="jquery-3.1.1.js"> </script>
<script src="opencpu-0.5.js"> </script>

<style>
#plotdiv {
  margin-left: 10px;
  margin-top: 10px;
  width: 900px;
  height: 600px;
  border: solid gray 1px;
}
</style>
</head>

<body>
  
  <h1>Fluorolive test</h1>
  
  <p>This is an example of a minimal OpenCPU app.</p>

  <div style="padding:16px;">
    Proteins : <input type="textbox", id="proteins", value='["EGFP","EYFP"]'></input>
    Lasers : <input type="textbox" id="lasers", value='[488, 640]'></input>
    Channels : <input type="textbox" id="channels", value='["580/30"]'></input>
  </div>

  <button id="plot">Plot</button>
  <button id="reset">Reset</button>

  <script type="text/javascript">
  $(document).ready(function() {
    $("#plot").click(function () {
	  var proteins = $('#proteins').val();
	  var lasers = $('#lasers').val();
	  var channels = $('#channels').val();
      var req = $("#plotdiv").rplot("iplot_spectra", {
        proteins: JSON.parse(proteins),
 	    lasers: JSON.parse(lasers),
	    channels: JSON.parse(channels)
      }).fail(function(){
           alert(req.responseText);
  	  });
    });

    $("#reset").click(function () {
	  $('#proteins').val('["EGFP","EYFP"]')
      $('#lasers').val('[488, 640]')
      $('#channels').val('["580/30"]')
	});
  });
</script>
  
  <div id="plotdiv"></div>
  
</body>
</html>
